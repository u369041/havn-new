// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // e.g. postgres://user:pass@ep-xxx.neon.tech/db?sslmode=require
}

model Property {
  id          String   @id @default(cuid())
  slug        String   @unique
  title       String
  status      String   @default("For Sale")   // e.g. "For Sale" | "Sale Agreed" | "To Rent" | "Let Agreed"
  listingType String                         // "sale" | "rent"
  price       Int
  pricePeriod String?                        // e.g. "per month" for rentals
  address     String
  eircode     String                         // stored UPPERCASE w/out spaces by the API
  city        String?
  county      String?
  type        String?                        // e.g. "House", "Apartment"
  ber         String?                        // e.g. "B2", "C1"
  beds        Int?
  baths       Int?
  area        Int?                           // square meters
  description String?

  images     String[]                        // Postgres text[]
  videoUrl   String?
  floorplans String[]                        // Postgres text[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([createdAt])
  @@index([listingType, status])
  @@index([eircode])
}
